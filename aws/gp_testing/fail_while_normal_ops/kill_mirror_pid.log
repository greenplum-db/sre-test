nohup: ignoring input
====================Start of test==================
====================connect to sdw1 and kill one primary segment======================
[sdw1_ipv4] 
[sdw1_ipv4] Usage:
[sdw1_ipv4]  kill [options] <pid|name> [...]
[sdw1_ipv4] 
[sdw1_ipv4] Options:
[sdw1_ipv4]  -a, --all              do not restrict the name-to-pid conversion to processes
[sdw1_ipv4]                         with the same uid as the present process
[sdw1_ipv4]  -s, --signal <sig>     send specified signal
[sdw1_ipv4]  -q, --queue <sig>      use sigqueue(2) rather than kill(2)
[sdw1_ipv4]  -p, --pid              print pids without signaling them
[sdw1_ipv4]  -l, --list [=<signal>] list signal names, or convert one to a name
[sdw1_ipv4]  -L, --table            list signal names and numbers
[sdw1_ipv4] 
[sdw1_ipv4]  -h, --help     display this help and exit
[sdw1_ipv4]  -V, --version  output version information and exit
[sdw1_ipv4] 
[sdw1_ipv4] For more details see kill(1).
======================check the failed segment======================
20210217:16:45:08:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-Starting gpstate with args: 
20210217:16:45:08:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-local Greenplum Version: 'postgres (Greenplum Database) 6.13.0 build commit:4f1adf8e247a9685c19ea02bcaddfdc200937ecd'
20210217:16:45:08:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-master Greenplum Version: 'PostgreSQL 9.4.24 (Greenplum Database 6.13.0 build commit:4f1adf8e247a9685c19ea02bcaddfdc200937ecd) on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 6.4.0, 64-bit compiled on Dec 16 2020 19:38:24'
20210217:16:45:08:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-Obtaining Segment details from master...
20210217:16:45:08:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-Gathering data from segments...
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-Greenplum instance status summary
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Master instance                                           = Active
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Master standby                                            = smdw_ipv4
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Standby master state                                      = Standby host passive
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total segment instance count from metadata                = 24
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Primary Segment Status
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total primary segments                                    = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total primary segment valid (at master)                   = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total primary segment failures (at master)                = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid files missing              = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid files found                = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid PIDs missing               = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid PIDs found                 = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of /tmp lock files missing                   = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of /tmp lock files found                     = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number postmaster processes missing                 = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number postmaster processes found                   = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Mirror Segment Status
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total mirror segments                                     = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total mirror segment valid (at master)                    = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total mirror segment failures (at master)                 = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid files missing              = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid files found                = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid PIDs missing               = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of postmaster.pid PIDs found                 = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of /tmp lock files missing                   = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number of /tmp lock files found                     = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number postmaster processes missing                 = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number postmaster processes found                   = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number mirror segments acting as primary segments   = 0
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-   Total number mirror segments acting as mirror segments    = 12
20210217:16:45:09:021807 gpstate:mdw_ipv4:gpadmin-[INFO]:-----------------------------------------------------
 dbid | content | role | preferred_role | mode | status | port | hostname | address | datadir 
------+---------+------+----------------+------+--------+------+----------+---------+---------
(0 rows)

====================Recover failed segment incremental========================
20210217:16:45:09:021890 gprecoverseg:mdw_ipv4:gpadmin-[INFO]:-Starting gprecoverseg with args: -a
20210217:16:45:09:021890 gprecoverseg:mdw_ipv4:gpadmin-[INFO]:-local Greenplum Version: 'postgres (Greenplum Database) 6.13.0 build commit:4f1adf8e247a9685c19ea02bcaddfdc200937ecd'
20210217:16:45:10:021890 gprecoverseg:mdw_ipv4:gpadmin-[INFO]:-master Greenplum Version: 'PostgreSQL 9.4.24 (Greenplum Database 6.13.0 build commit:4f1adf8e247a9685c19ea02bcaddfdc200937ecd) on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 6.4.0, 64-bit compiled on Dec 16 2020 19:38:24'
20210217:16:45:10:021890 gprecoverseg:mdw_ipv4:gpadmin-[INFO]:-Obtaining Segment details from master...
20210217:16:45:10:021890 gprecoverseg:mdw_ipv4:gpadmin-[INFO]:-No segments to recover
====================Check if all segments are up and go ahead to rebalance================
 dbid | content | role | preferred_role | mode | status | port | hostname | address | datadir 
------+---------+------+----------------+------+--------+------+----------+---------+---------
(0 rows)

End of test
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause. Creating a NULL policy entry.
SELECT 1000000
 count | gp_segment_id 
-------+---------------
 83372 |             1
 83523 |             6
 83104 |             5
 83295 |            10
 83140 |             4
 83316 |             0
 83371 |             3
 83402 |             9
 83509 |             2
 83254 |             8
 83099 |             7
 83615 |            11
(12 rows)

DROP TABLE
